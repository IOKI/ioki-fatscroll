angular.module("ioki.fatscroll",[]).directive("fatscroll",function(a){"use strict";return{restrict:"A",transclude:!0,templateUrl:"templates/ioki-fatscroll",link:function(b,c){function d(){l=c[0],m=c[0].clientHeight,n=l.firstChild,o=c.find("scroll-area"),p=c.find("scroll-content")[0].clientHeight,u=m/p,y=a.find("body"),g(),o.css("height",m+"px"),m>=p?x.css("display","none"):x.css("display","block")}function e(a,b){var c=h();w=parseInt(c/u,10),"number"!=typeof a&&(a="number"==typeof b?a.offsetTop+b:a.offsetTop),a>w?(x.css("top",c+"px"),z=c,n.scrollTop=w):0>a?(x.css("top","0"),z=0,n.scrollTop=0):(x.css("top",+(a*u)+"px"),z=a*u,n.scrollTop=a)}function f(a){var b=void 0!==a.deltaY?a.deltaY:40*a.detail;n.scrollTop+=b,e(n.scrollTop)}function g(){var a=u*m;return x.css({height:a+"px"}),a}function h(){return m-q}function i(b){s=b.y||b.clientY,r=parseInt(x.css("top")||0,10),t=n.scrollTop,a.on("mousemove",k),a.on("mouseup",j)}function j(){a.off("mousemove",k),y.removeClass("no-select")}function k(a){v=r+a.pageY-s,q=g(),y.addClass("no-select"),e(t+(a.pageY-s)/u)}var l,m,n,o,p,q,r,s,t,u,v,w,x=c.find("thumb"),y=a.find("body"),z=0;b.scrollContentHeight=c.find("scroll-content")[0],c.on("mousewheel",f),c.on("DOMMouseScroll",f),x.on("mousedown touchstart",i),d(),b.$watch("scrollContentHeight.clientHeight",function(a,b){a!==b&&d()})}}}),angular.module("ioki.fatscroll").run(["$templateCache",function(a){"use strict";a.put("templates/ioki-fatscroll",'<scroll-area>\n    <scroll-content class="scroll-content" ng-transclude></scroll-content>\n</scroll-area>\n<thumb></thumb>')}]);